<!doctype html>
<html>
  <head></head>
  <body>
    <h1>Loading...</h1>
    <script>
      const registerServiceWorker = async () => {
        if ("serviceWorker" in navigator) {
          try {
            const registration = await navigator.serviceWorker.register(
              "/service-worker.js",
              {
                scope: "/view/",
              },
            );
            if (registration.installing) {
              console.log("Service worker installing");
            } else if (registration.waiting) {
              console.log("Service worker installed");
            } else if (registration.active) {
              console.log("Service worker active");
            }
            window.location.replace("/view/");
          } catch (error) {
            alert("Something went wrong while installing your website!");
            console.error(`Registration failed with ${error}`);
          }
        }
      };

      registerServiceWorker();
    </script>
    <noscript>This won't run without javascript!</noscript>
  </body>
</html>
